generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "mongodb"
  url      = env("DATABASE_URL")
}

model User {
  id        String   @id @default(auto()) @map("_id") @db.ObjectId
  email     String   @unique
  password  String   @unique
  firstName String
  lastName  String
  country   String
  point     Int      @default(0)
  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt

  cityCode Int?
  city     City? @relation(fields: [cityCode], references: [cityCode])

  @@map("users") // 몽고DB 컬렉션명
}

model Country {
  id         String @id @map("_id") // KR, US 등의 ISO 코드
  name       String
  nativeName String
  cities     City[] @relation("CountryCities")

  @@map("countries")
}

model City {
  id          String  @id @default(auto()) @map("_id") @db.ObjectId
  name        String
  cityCode    Int     @unique
  countryCode String
  imgUrl      String?
  dnScore     Int
  description String

  users   User[]
  Country Country? @relation("CountryCities", fields: [countryCode], references: [id])

  @@unique([countryCode, name])
  @@map("cities") // 몽고DB 컬렉션명
}

model Counter {
  id  String @id @default(auto()) @map("_id") @db.ObjectId
  seq Int    @unique

  @@map("counter")
}
